<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batik Cerdas</title>
    <link rel="stylesheet" href="../static/css/style.css">
    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <header>
        <!-- Carousel -->
        <div id="demo" class="carousel slide" data-bs-ride="carousel">

        <!-- Indicators/dots -->
        <div class="carousel-indicators">
        <button type="button" data-bs-target="#demo" data-bs-slide-to="0" class="active"></button>
        <button type="button" data-bs-target="#demo" data-bs-slide-to="1"></button>
        <button type="button" data-bs-target="#demo" data-bs-slide-to="2"></button>
        </div>
    
        <!-- The slideshow/carousel -->
        <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="../static/images/batik_banner1.jpg" alt="Banner 1" class="d-block w-100 h-50">
            <div class="banner-text">
                <h1>Batik Cerdas</h1>
                <p>Selamat Datang di Aplikasi Cerdas Penghasil Motif Batik</p>
              </div>            
        </div>
        <div class="carousel-item">
            <img src="../static/images/batik_banner2.jpg" alt="Banner 2" class="d-block w-100 h-50">
            <div class="banner-text">
                <h1>Batik Cerdas</h1>
                <p>Selamat Datang di Aplikasi Cerdas Penghasil Motif Batik</p>
              </div>            
        </div>
        <div class="carousel-item">
            <img src="../static/images/batik_banner3.jpg" alt="Banner 3" class="d-block w-100 h-50">
            <div class="banner-text">
                <h1>Batik Cerdas</h1>
                <p>Selamat Datang di Aplikasi Cerdas Penghasil Motif Batik</p>
              </div>            
        </div>
        </div>
    
        <!-- Left and right controls/icons -->
        <button class="carousel-control-prev" type="button" data-bs-target="#demo" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#demo" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
        </button>
    </div>

        <nav>
            <br>
            <ul class="nav justify-content-center">
                <li class="nav-item">
                    <a class="nav-link active" href="#tentangkami">Tentang Kami</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="#uploadbatik">Upload Batik</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="#buatmotif">Buat Motif</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link active" href="#kontak">Kontak</a>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        {% if not generated_images %}
        <div class="container pt-5 my-5 bg-primary text-white">
            <section id="tentangkami" class="content-section">
                <h2>Tentang Kami</h2>
                <br>
                <p>
                    Aplikasi "Batik Cerdas" merupakan sebuah platform web yang dirancang untuk memanfaatkan teknologi Deep Learning, 
                    khususnya metode Generative Adversarial Networks (GAN), guna menghasilkan motif batik secara otomatis. Pengguna 
                    dapat mengakses aplikasi ini melalui antarmuka web sederhana yang dibangun dengan menggunakan framework Flask. 
                    Dengan menggunakan aplikasi ini, pengguna dapat dengan mudah menemukan dan menghasilkan berbagai macam motif batik 
                    sesuai preferensi dan kebutuhan mereka. Aplikasi ini bertujuan untuk memberikan kemudahan bagi pengguna yang ingin 
                    menciptakan atau menemukan motif batik tanpa harus mempunyai keterampilan desain yang kompleks.
                </p>
            </section>
        </div>
        {% endif %}

        {% if not generated_images %}
        <div class="container pt-5 my-5 border">
            <section id="uploadbatik" class="content-section">
                <h2>Upload Batik</h2>
                <p>Menu ini digunakan untuk mengupload gambar batik baru untuk menambah jumlah dataset gambar batik. (Opsional)</p>
                <br>
                <form id="uploadForm" enctype="multipart/form-data" action="/upload" method="post">
                    <input type="file" id="fileInput" name="files[]" multiple accept="image/*">
                    <button type="submit" id="uploadButton" class="btn btn-success" value="Submit Button" disabled>Unggah</button>
                </form>
                <br>
            </section>
            <script>
                document.getElementById('fileInput').addEventListener('change', function() {
                    var uploadButton = document.getElementById('uploadButton');
                    if (this.files.length > 0) {
                        uploadButton.disabled = false;
                    } else {
                        uploadButton.disabled = true;
                    }
                });
            </script>            
        </div>
        {% endif %}
        
        <div class="container pt-5">
            <section id="buatmotif" class="content-section">
                {% if not generated_images %}
                <h2 id="buatmotif">Buat Motif</h2>
                <p>Menu ini digunakan untuk membuat motif batik baru.
                    <p>1. Pilih folder dataset batik yang diinginkan.
                    <p>2. Klik tombol Tampilkan, untuk menampilkan gambar batiknya.
                    <p>3. Pilih 2 atau lebih gambar batik untuk diproses.
                    <p>4. Pilih model deep learning yang akan dipakai.
                    <p>5. klik tombol Proses, tunggu hingga proses generate selesai.
                    <p>6. Jika proses berhasil, hasil generate akan ditampilkan.
                </p>
                <br>
                <form action="/#buatmotif" method="GET" class="row align-items-center">
                    <div class="col-auto">
                        <label for="folder" class="form-label">Pilih Folder:</label>
                    </div>
                    <div class="col-auto">
                        <select class="form-select form-select-lg" name="folder" id="folder" style="width: 500px;">
                            <option value="-----" {% if folder == '-----' %}selected{% endif %}>-----</option>
                            <option value="uploads" {% if folder == 'uploads' %}selected{% endif %}>Uploads</option>
                            <option value="dataset" {% if folder == 'dataset' %}selected{% endif %}>Dataset</option>
                            <option value="dataset/batik-bali" {% if folder == 'dataset/batik-bali' %}selected{% endif %}>Batik Bali</option>
                            <option value="dataset/batik-betawi" {% if folder == 'dataset/batik-betawi' %}selected{% endif %}>Batik Betawi</option>
                            <option value="dataset/batik-cendrawasih" {% if folder == 'dataset/batik-cendrawasih' %}selected{% endif %}>Batik Cendrawasih</option>
                            <option value="dataset/batik-ciamis" {% if folder == 'dataset/batik-ciamis' %}selected{% endif %}>Batik Ciamis</option>
                            <option value="dataset/batik-garutan" {% if folder == 'dataset/batik-garutan' %}selected{% endif %}>Batik Garutan</option>
                            <option value="dataset/batik-gentongan" {% if folder == 'dataset/batik-gentongan' %}selected{% endif %}>Batik Gentongan</option>
                            <option value="dataset/batik-ikat-celup" {% if folder == 'dataset/batik-ikat-celup' %}selected{% endif %}>Batik Ikat Celup</option>
                            <option value="dataset/batik-insang" {% if folder == 'dataset/batik-insang' %}selected{% endif %}>Batik Insang</option>
                            <option value="dataset/batik-kawung" {% if folder == 'dataset/batik-kawung' %}selected{% endif %}>Batik Kawung</option>
                            <option value="dataset/batik-keraton" {% if folder == 'dataset/batik-keraton' %}selected{% endif %}>Batik Keraton</option>
                            <option value="dataset/batik-lasem" {% if folder == 'dataset/batik-lasem' %}selected{% endif %}>Batik Lasem</option>
                            <option value="dataset/batik-megamendung" {% if folder == 'dataset/batik-megamendung' %}selected{% endif %}>Batik Megamendung</option>
                            <option value="dataset/batik-parang" {% if folder == 'dataset/batik-parang' %}selected{% endif %}>Batik Parang</option>
                            <option value="dataset/batik-pekalongan" {% if folder == 'dataset/batik-pekalongan' %}selected{% endif %}>Batik Pekalongan</option>
                            <option value="dataset/batik-sekar" {% if folder == 'dataset/batik-sekar' %}selected{% endif %}>Batik Sekar</option>
                            <option value="dataset/batik-semarangan" {% if folder == 'dataset/batik-semarangan' %}selected{% endif %}>Batik Semarangan</option>
                            <option value="dataset/batik-sidoluhur" {% if folder == 'dataset/batik-sidoluhur' %}selected{% endif %}>Batik Sidoluhur</option>
                            <option value="dataset/batik-tambal" {% if folder == 'dataset/batik-tambal' %}selected{% endif %}>Batik Tambal</option>
                        </select>
                    </div>
                    <div class="col-auto">
                        <button type="submit" class="btn btn-primary" value="Submit Button">Tampilkan</button>
                    </div>
                </form>
                <br>          
                <form action="/generate" method="POST">
                    <input type="hidden" name="folder" value="{{ folder }}">
                    <div id="imagePreviews" class="row">
                        {% for image in images %}
                        <div class="col-sm-2 mb-3">
                            <label>
                                <input type="checkbox" name="image_paths" value="{{ folder }}/{{ image }}">
                                <img src="{{ url_for('static', filename=folder + '/' + image) }}" class="img-fluid" alt="{{ folder }} Image" style="width:130px;height:130px; margin: 5px;">
                            </label>
                        </div>
                        {% endfor %}
                    </div>                    
                    <br>
                    <nav aria-label="Page navigation">
                        <ul class="pagination">
                            <li class="page-item {% if current_page == 1 %}disabled{% endif %}">
                                <a class="page-link" href="?folder={{ folder }}&page={{ current_page - 1 }}#buatmotif">Previous</a>
                            </li>
                            
                            {% if total_pages <= 10 %}
                                {% for page in range(1, total_pages + 1) %}
                                    <li class="page-item {% if page == current_page %}active{% endif %}">
                                        <a class="page-link" href="?folder={{ folder }}&page={{ page }}#buatmotif">{{ page }}</a>
                                    </li>
                                {% endfor %}
                            {% else %}
                                {% set start_page = current_page - 5 %}
                                {% set end_page = current_page + 4 %}
                                
                                {% if start_page < 1 %}
                                    {% set end_page = end_page + (1 - start_page) %}
                                    {% set start_page = 1 %}
                                {% endif %}
                                
                                {% if end_page > total_pages %}
                                    {% set start_page = start_page - (end_page - total_pages) %}
                                    {% set end_page = total_pages %}
                                {% endif %}
                                
                                {% if start_page > 1 %}
                                    <li class="page-item">
                                        <a class="page-link" href="?folder={{ folder }}&page=1#buatmotif">1</a>
                                    </li>
                                    <li class="page-item">
                                        <span class="page-link">...</span>
                                    </li>
                                {% endif %}
                                
                                {% for page in range(start_page, end_page + 1) %}
                                    <li class="page-item {% if page == current_page %}active{% endif %}">
                                        <a class="page-link" href="?folder={{ folder }}&page={{ page }}#buatmotif">{{ page }}</a>
                                    </li>
                                {% endfor %}
                                
                                {% if end_page < total_pages %}
                                    <li class="page-item">
                                        <span class="page-link">...</span>
                                    </li>
                                    <li class="page-item">
                                        <a class="page-link" href="?folder={{ folder }}&page={{ total_pages }}#buatmotif">{{ total_pages }}</a>
                                    </li>
                                {% endif %}
                            {% endif %}
                            
                            <li class="page-item {% if current_page == total_pages %}disabled{% endif %}">
                                <a class="page-link" href="?folder={{ folder }}&page={{ current_page + 1 }}#buatmotif">Next</a>
                            </li>
                        </ul>
                    </nav>
                    <br>
                    <div class="row mb-3">
                        <div class="col-auto">
                            <label for="folder" class="form-label">Pilih Model:</label>
                        </div>
                        <div class="col-auto">
                            <select class="form-select form-select-lg" name="model" id="model" style="width: 500px;">
                                <option value="" {% if not model %}selected{% endif %}>--Model--</option>
                                <option value="GAN" {% if model == 'GAN' %}selected{% endif %}>GAN <i>(Rekomendasi)</i></option>
                                <option value="CGAN" {% if model == 'CGAN' %}selected{% endif %}>CGAN</option>
                                <option value="DCGAN" {% if model == 'DCGAN' %}selected{% endif %}>DCGAN</option>
                                <option value="WGAN" {% if model == 'WGAN' %}selected{% endif %}>WGAN</option>
                                <option value="WGAN-GP" {% if model == 'WGAN-GP' %}selected{% endif %}>WGAN-GP</option>
                            </select>
                        </div>                                                                          
                        <div class="col-auto">
                            <button type="button" id="prosesButton" class="btn btn-primary btn-lg" disabled>Proses</button>
                        </div>
                    </div>                                        
                </form>                
                {% endif %}

                {% if request.path == '/generate' %}
                    <h2>Hasil Motif Batik</h2>
                    <br>
                    <div id="selectedImages" class="row justify-content-center" style="{% if selected_images %}display: block;{% else %}display: none;{% endif %}">
                        <div class="col-12 text-center">
                            <h3>Gambar Batik yang Dipilih</h3>
                        </div>
                        <div class="d-flex flex-wrap justify-content-center">
                            {% for selected_image in selected_images %}
                            <div class="m-2" style="max-width: 170px;">
                                <img src="{{ url_for('static', filename=selected_image) }}" class="img-fluid" alt="Selected Image" style="width:100%; height: 100%;">
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    <br>
                    <div id="generatedImages" class="row justify-content-center" style="{% if generated_images %}display: block;{% else %}display: none;{% endif %}">
                        <div class="col-12 text-center">
                            <h3>Gambar Batik Hasil Generate</h3>
                        </div>
                        {% for gen_image in generated_images %}
                        <div class="col-sm-6 mb-3 mx-auto" style="max-width: 400px;">
                            <img src="{{ url_for('static', filename='hasil/' + gen_image) }}" class="img-fluid" alt="Generated Image" style="width:100%; height: auto;">
                        </div>
                        {% endfor %}
                    </div>
                    <div class="row justify-content-center">
                        <div class="col-auto">
                            <form action="/generate" method="POST" style="display: inline;">
                                <input type="hidden" name="folder" value="{{ folder }}">
                                {% for selected_image in selected_images %}
                                <input type="hidden" name="image_paths" value="{{ selected_image }}">
                                {% endfor %}
                                <input type="hidden" name="num_images" value="{{ num_images }}">
                                <input type="hidden" name="model" value="{{ model }}">
                                <button type="submit" class="btn btn-warning btn-block">Ulangi</button>
                            </form>
                        </div>                        
                        <div class="col-auto">
                            {% for gen_image in generated_images %}
                            <a href="{{ url_for('static', filename='hasil/' + gen_image) }}" download="{{ gen_image }}" class="btn btn-success btn-block">Simpan</a>
                            {% endfor %}
                        </div>
                        <div class="col-auto">
                            <a href="/#buatmotif" class="btn btn-secondary btn-block">Kembali</a>
                        </div>
                    </div>
                {% endif %}
            </section>
        </div>
    
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                var checkboxes = document.querySelectorAll('input[name="image_paths"]');
                var prosesButton = document.getElementById("prosesButton");
    
                checkboxes.forEach(function(checkbox) {
                    checkbox.addEventListener("change", function() {
                        var anyChecked = Array.from(checkboxes).some(function(cb) {
                            return cb.checked;
                        });
                        prosesButton.disabled = !anyChecked;
                    });
                });
    
                prosesButton.addEventListener("click", function() {
                    var anyChecked = Array.from(checkboxes).some(function(cb) {
                        return cb.checked;
                    });
    
                    if (!anyChecked) {
                        alert("Harap pilih gambar terlebih dahulu!");
                    } else {
                        this.form.submit();
                    }
                });
    
                // Hide generated images section on page load
                if (!document.querySelectorAll('#generatedImages .col-sm-2').length) {
                    document.getElementById('generatedImages').style.display = "none";
                }
            });
        </script>                                      

        <div class="container pt-5 my-5 border">
            <section id="kontak" class="content-section">
                <h2>Kontak</h2>
                <div class="contact-icons">
                    <a href="https://wa.me/6285216496186" target="_blank"><img src="../static/images/whatsapp.png" alt="Whatsapp"></a>
                    <a href="http://t.me/farid_ffk" target="_blank"><img src="../static/images/telegram.png" alt="Telegram"></a>
                    <a href="https://mail.google.com/mail/u/0/#inbox" target="_blank"><img src="../static/images/gmail.png" alt="Gmail"></a>
                    <a href="https://www.facebook.com/profile.php?id=100062579341351" target="_blank"><img src="../static/images/facebook.png" alt="Facebook"></a>
                    <a href="https://www.twitter.com" target="_blank"><img src="../static/images/twitterx-240.png" alt="Twitter"></a>
                    <a href="https://www.instagram.com/khoirudin_76/" target="_blank"><img src="../static/images/instagram.png" alt="Instagram"></a>
                    <a href="https://www.linkedin.com/in/farid-fikri-khoirudin-1a39b8266/" target="_blank"><img src="../static/images/linkedin.png" alt="Linkedin"></a>
                    <a href="https://github.com/FaridFK" target="_blank"><img src="../static/images/github-256.png" alt="Github"></a>
                </div>                
            </section>
        </div>        
    </main>

    <footer>
        <p>Copyright &#169; 2024, Aplikasi Cerdas Penghasil Motif Batik</p>
    </footer>
</body>
</html>
